<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BMP Image Preview</title>
    <style>
        body { font-family: Arial, sans-serif; background: #222; color: #eee; text-align: center; }
        .img-container { display: flex; justify-content: center; gap: 2em; margin-top: 2em; }
        img { border: 2px solid #444; background: #111; max-width: 320px; max-height: 320px; }
        h1 { margin-top: 1em; }
    </style>
</head>
<body>
    <h1>BMP Image Preview</h1>

        <div class="img-container">
                <div class="bmp-drop-target" data-filename="images/openSimplex2.bmp"
                         ondragover="event.preventDefault()"
                         ondrop="handleDrop(event, this)">
                        <h2>openSimplex2.bmp</h2>
                        <img src="images/openSimplex2.bmp" alt="openSimplex2 BMP">
                        <div style="margin-top:0.5em; color:#aaa; font-size:0.9em;">Drag BMP here to replace</div>
                </div>
                <div class="bmp-drop-target" data-filename="images/perlinNoise.bmp"
                         ondragover="event.preventDefault()"
                         ondrop="handleDrop(event, this)">
                        <h2>perlinNoise.bmp</h2>
                        <img src="images/perlinNoise.bmp" alt="perlinNoise BMP">
                        <div style="margin-top:0.5em; color:#aaa; font-size:0.9em;">Drag BMP here to replace</div>
                </div>
        </div>

        <hr style="margin:2em 0;">
        <div>
                <label for="update-index">Update Webpage (index.html):</label>
                <input type="file" id="update-index" accept=".html">
                <button onclick="uploadIndex()">Upload</button>
        </div>

        <script>
        function handleDrop(event, elem) {
            event.preventDefault();
            var file = event.dataTransfer.files[0];
            var filename = elem.getAttribute('data-filename');
            if (file && file.type === "image/bmp") {
                var xhttp = new XMLHttpRequest();
                xhttp.open("POST", "/upload/" + filename, true);
                xhttp.send(file);
                xhttp.onload = function() { location.reload(); };
            } else {
                alert("Please drop a BMP file.");
            }
        }

        function uploadIndex() {
            var file = document.getElementById("update-index").files[0];
            if (file && file.name.endsWith(".html")) {
                var xhttp = new XMLHttpRequest();
                xhttp.open("POST", "/upload/index.html", true);
                xhttp.send(file);
                xhttp.onload = function() { location.reload(); };
            } else {
                alert("Please select an HTML file.");
            }
        }
        </script>
</body>
</html>
